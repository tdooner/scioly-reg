- content_for :javascripts do
  :javascript
    $(function() {
      $("table#admin-score-table").tablesorter({
        sortList: [[1,0]],
        textExtraction: function(node) {
          if (1 in node.childNodes) {
            return node.childNodes[1].value
          } else {
            return node.innerHTML;
          }
        }
      });
      $("table#admin-score-table input").bind("change", function() {
        $(this).trigger("update");
      });
    });

%p
  Note: There are
  %b=@teams.length.to_s + " teams"
  teams registered in this division. Therefore, by
  %a{:href=>"http://soinc.org/scoring_guidelines"} Science Olympiad Scoring Guidelines,
  %ul
    %li
      No-Show teams should be ranked
      %b=(@teams.length+1)
    %li
      Disqualified teams should be ranked
      %b=(@teams.length+2)

= form_tag admin_schedule_scores_url(@schedule), class: 'form-horizontal' do
  %input{:type=>"hidden", :name=>"authenticity_token", :value=>"#{form_authenticity_token}"}
  %table.table.table-condensed#admin-score-table
    %thead
      %th{width: '100px'} Ranking
      %th{width: '100px'} Team Number
      %th Team Name

    %tbody
      - @teams.each do |t|
        %tr
          %td
            = text_field_tag "placings[#{t.id}]", @placements[t.id], class: 'form-control'
          %td{:style=>"vertical-align:middle"}
            %input{:type=>"hidden",:value=>t.number}
            =t.getNumber
          %td{:style=>"vertical-align:middle"}=t.name
  %p Scores will be posted online at the conclusion of the awards ceremony (or at 8pm on the night of the tournament) by default. Since every event has an impact on the official scores for the entire tournament, holding back scores for an event will stop the official scores for the tournament from being released.
  %p This feature is intended to be used while there is an unresolved scoring dispute for an event.

  .form-group
    .col-md-11.col-md-offset-1
      %input{:type=>"checkbox", :value=>"true", :name=>"scores_withheld", :id=>"scores_withheld", checked: @schedule.scores_withheld}
      %label{:for=>"scores_withheld"}
        %b Don't Automatically Publish Scores

  .row
    %input.btn.btn-primary{ name: 'score_action', type: 'submit', value: 'Submit Scores' }
    %input.btn.btn-default{ name: 'score_action', type: 'submit', value: 'Reset Scores',
                data: { confirm: 'Are you sure you wish to reset scores for this event? This cannot be undone!' } }
