=stylesheet_link_tag 'deck.core'
=stylesheet_link_tag 'swiss'
-content_for :scripts do
  =javascript_include_tag 'underscore-min'
  =javascript_include_tag 'backbone-min'
  =#javascript_include_tag 'backbone.dualstorage'
  =javascript_include_tag 'deck.core'
  =javascript_include_tag 'backbone-relational'
  =javascript_include_tag 'require', :'data-main' => '/javascripts/scorecenter/'
  :javascript
    $(function(){
      require(['scorecenter'], function(ScoreCenter) {
        localStorage.clear();
        router = new ScoreCenter();
        Backbone.history.start();
      });
    });
    var globalData = #{@data};
:css
  form .clearfix {
    margin-bottom: 0px !important;
  }
  .deck-container {
    width: 100%; height: 100%;
    position: absolute; top: 0; left: 0;
    z-index: 10;
    background-color: #fff;
  }

%div#scorecenter-container
  Loading Data...
%script#scoreCenterHome{ :type => "text/template" }
  %table.zebra-striped.condensed-table#admin-score-table
    %thead
      %th Event Name
      %th Division
      %th Scores Reported
    %tbody#events-go-here
%script#eventtemplate{ :type => "text/template" }
  :plain
    <tr>
      <td><a href="#event/<%= id %>/scores"><%=event %></a></td>
      <td><%=division %></td>
      <td><span id="event-scores-reported-<%= id %>">Loading...</span></td>
    </tr>
%script#schedulehome{ :type => "text/template" }
  %p
    Note: There are
    %b <%=teams.length %> teams
    teams registered in this division. Therefore, by
    %a{:href=>"http://soinc.org/scoring_guidelines"} Science Olympiad Scoring Guidelines,
    %ul
      %li 
        No-Show teams should be ranked
        %b <%=teams.length+1 %>
      %li
        Disqualified teams should be ranked
        %b <%=teams.length+2 %>
  %form
    %table.zebra-striped.condensed-table#admin-score-table
      %thead
        %th.span2 Ranking
        %th{:width => "100px"} Team Number
        %th Team Name
      %tbody#scores-go-here
%script#rankingtemplate{ :type => "text/template" }
  :plain
    <td><div class="clearfix"><input class="span1 placement-input" type="text" name="placings[<%= team.id%>]" value="<%= placement || '' %>" /></div></td>
    <td style="vertical-align:middle"><%= team.number %></td>
    <td style="vertical-align:middle"><%= team.name %></td>
%script#slideshow{ :type => "text/template" }
  :plain
    <section class="slide">
      <h2><%= eventId %></h2>
      <ul id="scores-<%= eventId %>">
      </ul>
    </section>
%script#slideshowitem{:type => "text/template" }
  <% _.each(teams, function(team) { %>
  %li <%= team.team.name %>
  <% }); %>
